"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[111],{3877:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>u});var i=t(5893),r=t(1151);const a={sidebar_position:3,sidebar_label:"Plugin development"},s="Write a plugin for RIKA2MQTT",l={id:"getting-started/write-a-plugin",title:"Write a plugin for RIKA2MQTT",description:"API for plugins is currently under development and is marked @Beta. Be cautious that it can have breaking changes between future releases.",source:"@site/docs/getting-started/write-a-plugin.md",sourceDirName:"getting-started",slug:"/getting-started/write-a-plugin",permalink:"/getting-started/write-a-plugin",draft:!1,unlisted:!1,editUrl:"https://github.com/sebastienvermeille/rika2mqtt/tree/master/docs/docs/docs/getting-started/write-a-plugin.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Plugin development"},sidebar:"tutorialSidebar",previous:{title:"Configuration",permalink:"/getting-started/configuration"},next:{title:"MQTT Examples",permalink:"/category/mqtt-examples"}},o={},u=[{value:"Make a plugin configurable by the end user",id:"make-a-plugin-configurable-by-the-end-user",level:2},{value:"Define plugin parameters",id:"define-plugin-parameters",level:3},{value:"Retrieve user defined parameters for the plugin",id:"retrieve-user-defined-parameters-for-the-plugin",level:3}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"write-a-plugin-for-rika2mqtt",children:"Write a plugin for RIKA2MQTT"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["API for plugins is currently under development and is marked ",(0,i.jsx)(n.code,{children:"@Beta"}),". Be cautious that it can have breaking changes between future releases."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"RIKA2MQTT provide an API for plugin creators."}),"\n",(0,i.jsx)(n.p,{children:"A few modules in the project are demonstrating plugins:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"rika2mqtt-example-plugin"}),"\n",(0,i.jsx)(n.li,{children:"rika2mqtt-example-plugin-using-config"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["And an official plugin ",(0,i.jsx)(n.code,{children:"rika2mqtt-flux-metrics-plugin"})," that exports RIKA stove status to InfluxDB."]}),"\n",(0,i.jsx)(n.p,{children:"More documentation will follow in the future when the API is more stable and heavily tested."}),"\n",(0,i.jsx)(n.h2,{id:"make-a-plugin-configurable-by-the-end-user",children:"Make a plugin configurable by the end user"}),"\n",(0,i.jsxs)(n.p,{children:["Make your plugin main class implement ",(0,i.jsx)(n.code,{children:"ConfigurablePlugin"})]}),"\n",(0,i.jsx)(n.h3,{id:"define-plugin-parameters",children:"Define plugin parameters"}),"\n",(0,i.jsxs)(n.p,{children:["Implement: ",(0,i.jsx)(n.code,{children:"List<PluginConfigurationParameter> declarePluginConfigurationParameters()"}),"\nParameters can be built using RequiredPluginConfigurationParameter.builder() or OptionalPluginConfigurationParameter.builder() that provide guided assistance."]}),"\n",(0,i.jsx)(n.h3,{id:"retrieve-user-defined-parameters-for-the-plugin",children:"Retrieve user defined parameters for the plugin"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"class YourPlugin extends Rika2MqttPlugin {\n\n    // some code ...\n\n    start(){\n\n        var influxPort = getPluginConfigurationParameter(INFLUXDB_PORT);\n\n    }\n\n\n}\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Note: If a parameter is named: INFLUXDB_PORT, an ENV property will have to be passed to the rika2mqtt docker named ",(0,i.jsx)(n.code,{children:"PLUGIN_INFLUXDB_PORT=8086"})," (it must add an extra ",(0,i.jsx)(n.code,{children:"PLUGIN_"})," this help to keep plugin properties separated.)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Voila!"})]})}function c(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>s});var i=t(7294);const r={},a=i.createContext(r);function s(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);